"use strict";

var _utils = require("../../../utils");

class validateOAS2ExternalDocs {
  static get rule() {
    return 'oas2-schema/external-docs';
  }

  get validators() {
    return {
      description(node, ctx) {
        return node && node.description && typeof node.description !== 'string' ? ctx.createError(ctx.messageHelpers.fieldTypeMismatchMessageHelper('string'), 'value') : null;
      },

      url(node, ctx) {
        if (node && !node.url) return ctx.createError(ctx.messageHelpers.missingRequiredField('url'), 'key');
        if (!(0, _utils.isUrl)(node.url)) return ctx.createError('url must be a valid URL', 'value');
        return null;
      }

    };
  }

  OAS2ExternalDocumentation() {
    return {
      onEnter: (node, definition, ctx) => ctx.validateFields(this.config, this.rule, this.validators)
    };
  }

}

module.exports = validateOAS2ExternalDocs;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy92aXNpdG9ycy9ydWxlcy9vYXMyLXN0cnVjdHVyYWwvdmFsaWRhdGVPQVMyRXh0ZXJuYWxEb2NzLmpzIl0sIm5hbWVzIjpbInZhbGlkYXRlT0FTMkV4dGVybmFsRG9jcyIsInJ1bGUiLCJ2YWxpZGF0b3JzIiwiZGVzY3JpcHRpb24iLCJub2RlIiwiY3R4IiwiY3JlYXRlRXJyb3IiLCJtZXNzYWdlSGVscGVycyIsImZpZWxkVHlwZU1pc21hdGNoTWVzc2FnZUhlbHBlciIsInVybCIsIm1pc3NpbmdSZXF1aXJlZEZpZWxkIiwiT0FTMkV4dGVybmFsRG9jdW1lbnRhdGlvbiIsIm9uRW50ZXIiLCJkZWZpbml0aW9uIiwidmFsaWRhdGVGaWVsZHMiLCJjb25maWciLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUVBLE1BQU1BLHdCQUFOLENBQStCO0FBQzdCLGFBQVdDLElBQVgsR0FBa0I7QUFDaEIsV0FBTywyQkFBUDtBQUNEOztBQUVELE1BQUlDLFVBQUosR0FBaUI7QUFDZixXQUFPO0FBQ0xDLE1BQUFBLFdBQVcsQ0FBQ0MsSUFBRCxFQUFPQyxHQUFQLEVBQVk7QUFDckIsZUFBT0QsSUFBSSxJQUFJQSxJQUFJLENBQUNELFdBQWIsSUFBNEIsT0FBT0MsSUFBSSxDQUFDRCxXQUFaLEtBQTRCLFFBQXhELEdBQ0hFLEdBQUcsQ0FBQ0MsV0FBSixDQUFnQkQsR0FBRyxDQUFDRSxjQUFKLENBQW1CQyw4QkFBbkIsQ0FBa0QsUUFBbEQsQ0FBaEIsRUFBNkUsT0FBN0UsQ0FERyxHQUNxRixJQUQ1RjtBQUVELE9BSkk7O0FBS0xDLE1BQUFBLEdBQUcsQ0FBQ0wsSUFBRCxFQUFPQyxHQUFQLEVBQVk7QUFDYixZQUFJRCxJQUFJLElBQUksQ0FBQ0EsSUFBSSxDQUFDSyxHQUFsQixFQUF1QixPQUFPSixHQUFHLENBQUNDLFdBQUosQ0FBZ0JELEdBQUcsQ0FBQ0UsY0FBSixDQUFtQkcsb0JBQW5CLENBQXdDLEtBQXhDLENBQWhCLEVBQWdFLEtBQWhFLENBQVA7QUFDdkIsWUFBSSxDQUFDLGtCQUFNTixJQUFJLENBQUNLLEdBQVgsQ0FBTCxFQUFzQixPQUFPSixHQUFHLENBQUNDLFdBQUosQ0FBZ0IseUJBQWhCLEVBQTJDLE9BQTNDLENBQVA7QUFDdEIsZUFBTyxJQUFQO0FBQ0Q7O0FBVEksS0FBUDtBQVdEOztBQUVESyxFQUFBQSx5QkFBeUIsR0FBRztBQUMxQixXQUFPO0FBQ0xDLE1BQUFBLE9BQU8sRUFBRSxDQUFDUixJQUFELEVBQU9TLFVBQVAsRUFBbUJSLEdBQW5CLEtBQTJCQSxHQUFHLENBQUNTLGNBQUosQ0FDbEMsS0FBS0MsTUFENkIsRUFDckIsS0FBS2QsSUFEZ0IsRUFDVixLQUFLQyxVQURLO0FBRC9CLEtBQVA7QUFLRDs7QUF6QjRCOztBQTRCL0JjLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmpCLHdCQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzVXJsIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMnO1xuXG5jbGFzcyB2YWxpZGF0ZU9BUzJFeHRlcm5hbERvY3Mge1xuICBzdGF0aWMgZ2V0IHJ1bGUoKSB7XG4gICAgcmV0dXJuICdvYXMyLXNjaGVtYS9leHRlcm5hbC1kb2NzJztcbiAgfVxuXG4gIGdldCB2YWxpZGF0b3JzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBkZXNjcmlwdGlvbihub2RlLCBjdHgpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUgJiYgbm9kZS5kZXNjcmlwdGlvbiAmJiB0eXBlb2Ygbm9kZS5kZXNjcmlwdGlvbiAhPT0gJ3N0cmluZydcbiAgICAgICAgICA/IGN0eC5jcmVhdGVFcnJvcihjdHgubWVzc2FnZUhlbHBlcnMuZmllbGRUeXBlTWlzbWF0Y2hNZXNzYWdlSGVscGVyKCdzdHJpbmcnKSwgJ3ZhbHVlJykgOiBudWxsO1xuICAgICAgfSxcbiAgICAgIHVybChub2RlLCBjdHgpIHtcbiAgICAgICAgaWYgKG5vZGUgJiYgIW5vZGUudXJsKSByZXR1cm4gY3R4LmNyZWF0ZUVycm9yKGN0eC5tZXNzYWdlSGVscGVycy5taXNzaW5nUmVxdWlyZWRGaWVsZCgndXJsJyksICdrZXknKTtcbiAgICAgICAgaWYgKCFpc1VybChub2RlLnVybCkpIHJldHVybiBjdHguY3JlYXRlRXJyb3IoJ3VybCBtdXN0IGJlIGEgdmFsaWQgVVJMJywgJ3ZhbHVlJyk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgT0FTMkV4dGVybmFsRG9jdW1lbnRhdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgb25FbnRlcjogKG5vZGUsIGRlZmluaXRpb24sIGN0eCkgPT4gY3R4LnZhbGlkYXRlRmllbGRzKFxuICAgICAgICB0aGlzLmNvbmZpZywgdGhpcy5ydWxlLCB0aGlzLnZhbGlkYXRvcnMsXG4gICAgICApLFxuICAgIH07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB2YWxpZGF0ZU9BUzJFeHRlcm5hbERvY3M7XG4iXX0=