"use strict";

var _utils = require("../../../utils");

class ValidateOAS2License {
  static get rule() {
    return 'oas2-schema/license';
  }

  get validators() {
    return {
      name(node, ctx) {
        return !node || !node.name ? ctx.createError(ctx.messageHelpers.missingRequiredField('name'), 'key') : null;
      },

      url(node, ctx) {
        return node && node.url && !(0, _utils.isUrl)(node.url) ? ctx.createError('The url field must be a valid URL.', 'value') : null;
      }

    };
  }

  OAS2License() {
    return {
      onEnter: (node, definition, ctx) => ctx.validateFields(this.config, this.rule, this.validators)
    };
  }

}

module.exports = ValidateOAS2License;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy92aXNpdG9ycy9ydWxlcy9vYXMyLXN0cnVjdHVyYWwvdmFsaWRhdGVPQVMyTGljZW5zZS5qcyJdLCJuYW1lcyI6WyJWYWxpZGF0ZU9BUzJMaWNlbnNlIiwicnVsZSIsInZhbGlkYXRvcnMiLCJuYW1lIiwibm9kZSIsImN0eCIsImNyZWF0ZUVycm9yIiwibWVzc2FnZUhlbHBlcnMiLCJtaXNzaW5nUmVxdWlyZWRGaWVsZCIsInVybCIsIk9BUzJMaWNlbnNlIiwib25FbnRlciIsImRlZmluaXRpb24iLCJ2YWxpZGF0ZUZpZWxkcyIsImNvbmZpZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBR0EsTUFBTUEsbUJBQU4sQ0FBMEI7QUFDeEIsYUFBV0MsSUFBWCxHQUFrQjtBQUNoQixXQUFPLHFCQUFQO0FBQ0Q7O0FBRUQsTUFBSUMsVUFBSixHQUFpQjtBQUNmLFdBQU87QUFDTEMsTUFBQUEsSUFBSSxDQUFDQyxJQUFELEVBQU9DLEdBQVAsRUFBWTtBQUNkLGVBQU8sQ0FBQ0QsSUFBRCxJQUFTLENBQUNBLElBQUksQ0FBQ0QsSUFBZixHQUFzQkUsR0FBRyxDQUFDQyxXQUFKLENBQWdCRCxHQUFHLENBQUNFLGNBQUosQ0FBbUJDLG9CQUFuQixDQUF3QyxNQUF4QyxDQUFoQixFQUFpRSxLQUFqRSxDQUF0QixHQUFnRyxJQUF2RztBQUNELE9BSEk7O0FBSUxDLE1BQUFBLEdBQUcsQ0FBQ0wsSUFBRCxFQUFPQyxHQUFQLEVBQVk7QUFDYixlQUFPRCxJQUFJLElBQUlBLElBQUksQ0FBQ0ssR0FBYixJQUFvQixDQUFDLGtCQUFNTCxJQUFJLENBQUNLLEdBQVgsQ0FBckIsR0FBdUNKLEdBQUcsQ0FBQ0MsV0FBSixDQUFnQixvQ0FBaEIsRUFBc0QsT0FBdEQsQ0FBdkMsR0FBd0csSUFBL0c7QUFDRDs7QUFOSSxLQUFQO0FBUUQ7O0FBRURJLEVBQUFBLFdBQVcsR0FBRztBQUNaLFdBQU87QUFDTEMsTUFBQUEsT0FBTyxFQUFFLENBQUNQLElBQUQsRUFBT1EsVUFBUCxFQUFtQlAsR0FBbkIsS0FBMkJBLEdBQUcsQ0FBQ1EsY0FBSixDQUNsQyxLQUFLQyxNQUQ2QixFQUNyQixLQUFLYixJQURnQixFQUNWLEtBQUtDLFVBREs7QUFEL0IsS0FBUDtBQUtEOztBQXRCdUI7O0FBeUIxQmEsTUFBTSxDQUFDQyxPQUFQLEdBQWlCaEIsbUJBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNVcmwgfSBmcm9tICcuLi8uLi8uLi91dGlscyc7XG5cblxuY2xhc3MgVmFsaWRhdGVPQVMyTGljZW5zZSB7XG4gIHN0YXRpYyBnZXQgcnVsZSgpIHtcbiAgICByZXR1cm4gJ29hczItc2NoZW1hL2xpY2Vuc2UnO1xuICB9XG5cbiAgZ2V0IHZhbGlkYXRvcnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWUobm9kZSwgY3R4KSB7XG4gICAgICAgIHJldHVybiAhbm9kZSB8fCAhbm9kZS5uYW1lID8gY3R4LmNyZWF0ZUVycm9yKGN0eC5tZXNzYWdlSGVscGVycy5taXNzaW5nUmVxdWlyZWRGaWVsZCgnbmFtZScpLCAna2V5JykgOiBudWxsO1xuICAgICAgfSxcbiAgICAgIHVybChub2RlLCBjdHgpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUgJiYgbm9kZS51cmwgJiYgIWlzVXJsKG5vZGUudXJsKSA/IGN0eC5jcmVhdGVFcnJvcignVGhlIHVybCBmaWVsZCBtdXN0IGJlIGEgdmFsaWQgVVJMLicsICd2YWx1ZScpIDogbnVsbDtcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIE9BUzJMaWNlbnNlKCkge1xuICAgIHJldHVybiB7XG4gICAgICBvbkVudGVyOiAobm9kZSwgZGVmaW5pdGlvbiwgY3R4KSA9PiBjdHgudmFsaWRhdGVGaWVsZHMoXG4gICAgICAgIHRoaXMuY29uZmlnLCB0aGlzLnJ1bGUsIHRoaXMudmFsaWRhdG9ycyxcbiAgICAgICksXG4gICAgfTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFZhbGlkYXRlT0FTMkxpY2Vuc2U7XG4iXX0=