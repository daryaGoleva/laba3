"use strict";

class ProvideContact {
  static get rule() {
    return 'provide-contact';
  }

  constructor(config) {
    this.config = config;
    this.requiredFields = ['name', 'email'];
    this.contactFields = [];
  }

  OpenAPIInfo() {
    return {
      onExit: (node, _, ctx) => {
        const errors = [];

        if (!node.contact) {
          return [ctx.createError(ctx.messageHelpers.missingRequiredField('contact'), 'key')];
        }

        return errors;
      }
    };
  }

  OAS2Info() {
    return {
      onExit: (node, _, ctx) => {
        const errors = [];

        if (!node.contact) {
          return [ctx.createError(ctx.messageHelpers.missingRequiredField('contact'), 'key')];
        }

        return errors;
      }
    };
  }

  OpenAPIContact() {
    return {
      onEnter: (node, _, ctx) => {
        const errors = [];
        this.requiredFields.forEach(fName => {
          if (Object.keys(node).indexOf(fName) === -1) {
            errors.push(ctx.createError(ctx.messageHelpers.missingRequiredField(fName), 'key'));
          }
        });
        return errors;
      }
    };
  }

}

module.exports = ProvideContact;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy92aXNpdG9ycy9ydWxlcy9zZW1hbnRpYy9wcm92aWRlLWNvbnRhY3QuanMiXSwibmFtZXMiOlsiUHJvdmlkZUNvbnRhY3QiLCJydWxlIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJyZXF1aXJlZEZpZWxkcyIsImNvbnRhY3RGaWVsZHMiLCJPcGVuQVBJSW5mbyIsIm9uRXhpdCIsIm5vZGUiLCJfIiwiY3R4IiwiZXJyb3JzIiwiY29udGFjdCIsImNyZWF0ZUVycm9yIiwibWVzc2FnZUhlbHBlcnMiLCJtaXNzaW5nUmVxdWlyZWRGaWVsZCIsIk9BUzJJbmZvIiwiT3BlbkFQSUNvbnRhY3QiLCJvbkVudGVyIiwiZm9yRWFjaCIsImZOYW1lIiwiT2JqZWN0Iiwia2V5cyIsImluZGV4T2YiLCJwdXNoIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxjQUFOLENBQXFCO0FBQ25CLGFBQVdDLElBQVgsR0FBa0I7QUFDaEIsV0FBTyxpQkFBUDtBQUNEOztBQUVEQyxFQUFBQSxXQUFXLENBQUNDLE1BQUQsRUFBUztBQUNsQixTQUFLQSxNQUFMLEdBQWNBLE1BQWQ7QUFDQSxTQUFLQyxjQUFMLEdBQXNCLENBQUMsTUFBRCxFQUFTLE9BQVQsQ0FBdEI7QUFDQSxTQUFLQyxhQUFMLEdBQXFCLEVBQXJCO0FBQ0Q7O0FBRURDLEVBQUFBLFdBQVcsR0FBRztBQUNaLFdBQU87QUFDTEMsTUFBQUEsTUFBTSxFQUFFLENBQUNDLElBQUQsRUFBT0MsQ0FBUCxFQUFVQyxHQUFWLEtBQWtCO0FBQ3hCLGNBQU1DLE1BQU0sR0FBRyxFQUFmOztBQUNBLFlBQUksQ0FBQ0gsSUFBSSxDQUFDSSxPQUFWLEVBQW1CO0FBQ2pCLGlCQUFPLENBQUNGLEdBQUcsQ0FBQ0csV0FBSixDQUFnQkgsR0FBRyxDQUFDSSxjQUFKLENBQW1CQyxvQkFBbkIsQ0FBd0MsU0FBeEMsQ0FBaEIsRUFBb0UsS0FBcEUsQ0FBRCxDQUFQO0FBQ0Q7O0FBQ0QsZUFBT0osTUFBUDtBQUNEO0FBUEksS0FBUDtBQVNEOztBQUVESyxFQUFBQSxRQUFRLEdBQUc7QUFDVCxXQUFPO0FBQ0xULE1BQUFBLE1BQU0sRUFBRSxDQUFDQyxJQUFELEVBQU9DLENBQVAsRUFBVUMsR0FBVixLQUFrQjtBQUN4QixjQUFNQyxNQUFNLEdBQUcsRUFBZjs7QUFDQSxZQUFJLENBQUNILElBQUksQ0FBQ0ksT0FBVixFQUFtQjtBQUNqQixpQkFBTyxDQUFDRixHQUFHLENBQUNHLFdBQUosQ0FBZ0JILEdBQUcsQ0FBQ0ksY0FBSixDQUFtQkMsb0JBQW5CLENBQXdDLFNBQXhDLENBQWhCLEVBQW9FLEtBQXBFLENBQUQsQ0FBUDtBQUNEOztBQUNELGVBQU9KLE1BQVA7QUFDRDtBQVBJLEtBQVA7QUFTRDs7QUFFRE0sRUFBQUEsY0FBYyxHQUFHO0FBQ2YsV0FBTztBQUNMQyxNQUFBQSxPQUFPLEVBQUUsQ0FBQ1YsSUFBRCxFQUFPQyxDQUFQLEVBQVVDLEdBQVYsS0FBa0I7QUFDekIsY0FBTUMsTUFBTSxHQUFHLEVBQWY7QUFDQSxhQUFLUCxjQUFMLENBQW9CZSxPQUFwQixDQUE2QkMsS0FBRCxJQUFXO0FBQ3JDLGNBQUlDLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZZCxJQUFaLEVBQWtCZSxPQUFsQixDQUEwQkgsS0FBMUIsTUFBcUMsQ0FBQyxDQUExQyxFQUE2QztBQUMzQ1QsWUFBQUEsTUFBTSxDQUFDYSxJQUFQLENBQ0VkLEdBQUcsQ0FBQ0csV0FBSixDQUFnQkgsR0FBRyxDQUFDSSxjQUFKLENBQW1CQyxvQkFBbkIsQ0FBd0NLLEtBQXhDLENBQWhCLEVBQWdFLEtBQWhFLENBREY7QUFHRDtBQUNGLFNBTkQ7QUFPQSxlQUFPVCxNQUFQO0FBQ0Q7QUFYSSxLQUFQO0FBYUQ7O0FBakRrQjs7QUFvRHJCYyxNQUFNLENBQUNDLE9BQVAsR0FBaUIxQixjQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFByb3ZpZGVDb250YWN0IHtcbiAgc3RhdGljIGdldCBydWxlKCkge1xuICAgIHJldHVybiAncHJvdmlkZS1jb250YWN0JztcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMucmVxdWlyZWRGaWVsZHMgPSBbJ25hbWUnLCAnZW1haWwnXTtcbiAgICB0aGlzLmNvbnRhY3RGaWVsZHMgPSBbXTtcbiAgfVxuXG4gIE9wZW5BUElJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBvbkV4aXQ6IChub2RlLCBfLCBjdHgpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3JzID0gW107XG4gICAgICAgIGlmICghbm9kZS5jb250YWN0KSB7XG4gICAgICAgICAgcmV0dXJuIFtjdHguY3JlYXRlRXJyb3IoY3R4Lm1lc3NhZ2VIZWxwZXJzLm1pc3NpbmdSZXF1aXJlZEZpZWxkKCdjb250YWN0JyksICdrZXknKV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVycm9ycztcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIE9BUzJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBvbkV4aXQ6IChub2RlLCBfLCBjdHgpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3JzID0gW107XG4gICAgICAgIGlmICghbm9kZS5jb250YWN0KSB7XG4gICAgICAgICAgcmV0dXJuIFtjdHguY3JlYXRlRXJyb3IoY3R4Lm1lc3NhZ2VIZWxwZXJzLm1pc3NpbmdSZXF1aXJlZEZpZWxkKCdjb250YWN0JyksICdrZXknKV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVycm9ycztcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIE9wZW5BUElDb250YWN0KCkge1xuICAgIHJldHVybiB7XG4gICAgICBvbkVudGVyOiAobm9kZSwgXywgY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9ycyA9IFtdO1xuICAgICAgICB0aGlzLnJlcXVpcmVkRmllbGRzLmZvckVhY2goKGZOYW1lKSA9PiB7XG4gICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5vZGUpLmluZGV4T2YoZk5hbWUpID09PSAtMSkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goXG4gICAgICAgICAgICAgIGN0eC5jcmVhdGVFcnJvcihjdHgubWVzc2FnZUhlbHBlcnMubWlzc2luZ1JlcXVpcmVkRmllbGQoZk5hbWUpLCAna2V5JyksXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBlcnJvcnM7XG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQcm92aWRlQ29udGFjdDtcbiJdfQ==