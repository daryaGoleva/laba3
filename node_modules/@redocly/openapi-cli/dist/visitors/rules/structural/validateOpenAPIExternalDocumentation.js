"use strict";

var _utils = require("../../../utils");

class ValidateOpenAPIExternalDocumentation {
  static get rule() {
    return 'oas3-schema/external-docs';
  }

  get validators() {
    return {
      description(node, ctx) {
        return node && node.description && typeof node.description !== 'string' ? ctx.createError(ctx.messageHelpers.fieldTypeMismatchMessageHelper('string'), 'value') : null;
      },

      url(node, ctx) {
        if (node && !node.url) return ctx.createError(ctx.messageHelpers.missingRequiredField('url'), 'key');
        if (!(0, _utils.isUrl)(node.url)) return ctx.createError('url must be a valid URL', 'value');
        return null;
      }

    };
  }

  OpenAPIExternalDocumentation() {
    return {
      onEnter: (node, definition, ctx) => ctx.validateFields(this.config, this.rule, this.validators)
    };
  }

}

module.exports = ValidateOpenAPIExternalDocumentation;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy92aXNpdG9ycy9ydWxlcy9zdHJ1Y3R1cmFsL3ZhbGlkYXRlT3BlbkFQSUV4dGVybmFsRG9jdW1lbnRhdGlvbi5qcyJdLCJuYW1lcyI6WyJWYWxpZGF0ZU9wZW5BUElFeHRlcm5hbERvY3VtZW50YXRpb24iLCJydWxlIiwidmFsaWRhdG9ycyIsImRlc2NyaXB0aW9uIiwibm9kZSIsImN0eCIsImNyZWF0ZUVycm9yIiwibWVzc2FnZUhlbHBlcnMiLCJmaWVsZFR5cGVNaXNtYXRjaE1lc3NhZ2VIZWxwZXIiLCJ1cmwiLCJtaXNzaW5nUmVxdWlyZWRGaWVsZCIsIk9wZW5BUElFeHRlcm5hbERvY3VtZW50YXRpb24iLCJvbkVudGVyIiwiZGVmaW5pdGlvbiIsInZhbGlkYXRlRmllbGRzIiwiY29uZmlnIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFFQSxNQUFNQSxvQ0FBTixDQUEyQztBQUN6QyxhQUFXQyxJQUFYLEdBQWtCO0FBQ2hCLFdBQU8sMkJBQVA7QUFDRDs7QUFFRCxNQUFJQyxVQUFKLEdBQWlCO0FBQ2YsV0FBTztBQUNMQyxNQUFBQSxXQUFXLENBQUNDLElBQUQsRUFBT0MsR0FBUCxFQUFZO0FBQ3JCLGVBQU9ELElBQUksSUFBSUEsSUFBSSxDQUFDRCxXQUFiLElBQTRCLE9BQU9DLElBQUksQ0FBQ0QsV0FBWixLQUE0QixRQUF4RCxHQUNIRSxHQUFHLENBQUNDLFdBQUosQ0FBZ0JELEdBQUcsQ0FBQ0UsY0FBSixDQUFtQkMsOEJBQW5CLENBQWtELFFBQWxELENBQWhCLEVBQTZFLE9BQTdFLENBREcsR0FDcUYsSUFENUY7QUFFRCxPQUpJOztBQUtMQyxNQUFBQSxHQUFHLENBQUNMLElBQUQsRUFBT0MsR0FBUCxFQUFZO0FBQ2IsWUFBSUQsSUFBSSxJQUFJLENBQUNBLElBQUksQ0FBQ0ssR0FBbEIsRUFBdUIsT0FBT0osR0FBRyxDQUFDQyxXQUFKLENBQWdCRCxHQUFHLENBQUNFLGNBQUosQ0FBbUJHLG9CQUFuQixDQUF3QyxLQUF4QyxDQUFoQixFQUFnRSxLQUFoRSxDQUFQO0FBQ3ZCLFlBQUksQ0FBQyxrQkFBTU4sSUFBSSxDQUFDSyxHQUFYLENBQUwsRUFBc0IsT0FBT0osR0FBRyxDQUFDQyxXQUFKLENBQWdCLHlCQUFoQixFQUEyQyxPQUEzQyxDQUFQO0FBQ3RCLGVBQU8sSUFBUDtBQUNEOztBQVRJLEtBQVA7QUFXRDs7QUFFREssRUFBQUEsNEJBQTRCLEdBQUc7QUFDN0IsV0FBTztBQUNMQyxNQUFBQSxPQUFPLEVBQUUsQ0FBQ1IsSUFBRCxFQUFPUyxVQUFQLEVBQW1CUixHQUFuQixLQUEyQkEsR0FBRyxDQUFDUyxjQUFKLENBQ2xDLEtBQUtDLE1BRDZCLEVBQ3JCLEtBQUtkLElBRGdCLEVBQ1YsS0FBS0MsVUFESztBQUQvQixLQUFQO0FBS0Q7O0FBekJ3Qzs7QUE0QjNDYyxNQUFNLENBQUNDLE9BQVAsR0FBaUJqQixvQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc1VybCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzJztcblxuY2xhc3MgVmFsaWRhdGVPcGVuQVBJRXh0ZXJuYWxEb2N1bWVudGF0aW9uIHtcbiAgc3RhdGljIGdldCBydWxlKCkge1xuICAgIHJldHVybiAnb2FzMy1zY2hlbWEvZXh0ZXJuYWwtZG9jcyc7XG4gIH1cblxuICBnZXQgdmFsaWRhdG9ycygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGVzY3JpcHRpb24obm9kZSwgY3R4KSB7XG4gICAgICAgIHJldHVybiBub2RlICYmIG5vZGUuZGVzY3JpcHRpb24gJiYgdHlwZW9mIG5vZGUuZGVzY3JpcHRpb24gIT09ICdzdHJpbmcnXG4gICAgICAgICAgPyBjdHguY3JlYXRlRXJyb3IoY3R4Lm1lc3NhZ2VIZWxwZXJzLmZpZWxkVHlwZU1pc21hdGNoTWVzc2FnZUhlbHBlcignc3RyaW5nJyksICd2YWx1ZScpIDogbnVsbDtcbiAgICAgIH0sXG4gICAgICB1cmwobm9kZSwgY3R4KSB7XG4gICAgICAgIGlmIChub2RlICYmICFub2RlLnVybCkgcmV0dXJuIGN0eC5jcmVhdGVFcnJvcihjdHgubWVzc2FnZUhlbHBlcnMubWlzc2luZ1JlcXVpcmVkRmllbGQoJ3VybCcpLCAna2V5Jyk7XG4gICAgICAgIGlmICghaXNVcmwobm9kZS51cmwpKSByZXR1cm4gY3R4LmNyZWF0ZUVycm9yKCd1cmwgbXVzdCBiZSBhIHZhbGlkIFVSTCcsICd2YWx1ZScpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIE9wZW5BUElFeHRlcm5hbERvY3VtZW50YXRpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9uRW50ZXI6IChub2RlLCBkZWZpbml0aW9uLCBjdHgpID0+IGN0eC52YWxpZGF0ZUZpZWxkcyhcbiAgICAgICAgdGhpcy5jb25maWcsIHRoaXMucnVsZSwgdGhpcy52YWxpZGF0b3JzLFxuICAgICAgKSxcbiAgICB9O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVmFsaWRhdGVPcGVuQVBJRXh0ZXJuYWxEb2N1bWVudGF0aW9uO1xuIl19